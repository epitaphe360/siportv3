# Nixpacks Configuration for SIPORTS Web Application
# Force Node.js build only, ignore Deno/mobile apps detection

# Use Node.js 20 (Vite v6 compatible with Node.js 18+)
# Vite v6.0.0 works perfectly with Node.js 20.6.1+
[phases.setup]
nixPkgs = ["nodejs_20"]

# Install dependencies (use npm install to regenerate lock file after Vite downgrade)
[phases.install]
cmds = ["npm install --prefer-offline --no-audit"]

# Build the web application with Vite
[phases.build]
cmds = ["npm run build"]

# Start command for production preview server
[start]
cmd = "npm run preview"


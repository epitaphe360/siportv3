# Nixpacks Configuration for SIPORTS Web Application
# Force Node.js build only, ignore Deno/mobile apps detection

# Use Node.js 22 (required by Vite v7.1.7+)
# Vite v7 requires Node.js 20.19+ or 22.12+
# Using Node.js 22 to ensure we get a recent enough version
[phases.setup]
nixPkgs = ["nodejs_22"]

# Install dependencies (use npm ci for production)
[phases.install]
cmds = ["npm ci"]

# Build the web application with Vite
[phases.build]
cmds = ["npm run build"]

# Start command for production preview server
[start]
cmd = "npm run preview"


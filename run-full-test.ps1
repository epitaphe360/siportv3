# Script PowerShell pour executer tous les tests et generer les rapportsWrite-Host "================================================" -ForegroundColor CyanWrite-Host "   TESTS COMPLETS SIPORT v3" -ForegroundColor CyanWrite-Host "================================================" -ForegroundColor CyanWrite-Host ""# 1. Verifier que le serveur dev tourneWrite-Host "1. Verification du serveur de developpement..." -ForegroundColor Yellow$process = Get-Process -Name "node" -ErrorAction SilentlyContinue | Where-Object {$_.MainWindowTitle -like "*Vite*"}if (-not $process) {    Write-Host "   [!] Le serveur dev n'est pas demarre" -ForegroundColor Red    Write-Host "   Demarrage du serveur..." -ForegroundColor Yellow    Start-Process powershell -ArgumentList "-NoExit", "-Command", "cd '$PWD'; npm run dev"    Start-Sleep -Seconds 10}Write-Host "   [OK] Serveur dev actif" -ForegroundColor GreenWrite-Host ""# 2. Scanner le bug adminWrite-Host "2. Analyse du bug admin auto-connecte..." -ForegroundColor Yellownpx ts-node scripts/fix-admin-auto-login.tsWrite-Host ""# 3. Compiler le script de testWrite-Host "3. Compilation du script de test..." -ForegroundColor Yellowif (Test-Path "scripts/test-all-pages.js") {    Remove-Item "scripts/test-all-pages.js"}npx tsc scripts/test-all-pages.ts --module commonjs --target es2020 --esModuleInterop --resolveJsonModuleWrite-Host "   [OK] Script compile" -ForegroundColor GreenWrite-Host ""# 4. Executer les tests completsWrite-Host "4. Execution des tests sur toutes les pages..." -ForegroundColor YellowWrite-Host "   (Cela peut prendre plusieurs minutes)" -ForegroundColor GrayWrite-Host ""node scripts/test-all-pages.js http://localhost:5173Write-Host ""# 5. Afficher le dernier rapportWrite-Host "5. Ouverture du rapport..." -ForegroundColor Yellow$latestReport = Get-ChildItem -Path "test-reports" -Directory -ErrorAction SilentlyContinue | Sort-Object CreationTime -Descending | Select-Object -First 1if ($latestReport) {    $reportPath = Join-Path $latestReport.FullName "REPORT.md"    if (Test-Path $reportPath) {        Write-Host "   [OK] Rapport: $reportPath" -ForegroundColor Green        code $reportPath    }        $fixesPath = Join-Path $latestReport.FullName "FIXES_NEEDED.md"    if (Test-Path $fixesPath) {        Write-Host "   [OK] Corrections: $fixesPath" -ForegroundColor Green        code $fixesPath    }}Write-Host ""Write-Host "================================================" -ForegroundColor CyanWrite-Host "   Tests termines!" -ForegroundColor GreenWrite-Host "================================================" -ForegroundColor CyanWrite-Host ""Write-Host "[INFO] Consultez les rapports dans le dossier test-reports" -ForegroundColor YellowWrite-Host ""# Demander si on veut appliquer les corrections automatiquement$apply = Read-Host "Voulez-vous appliquer les corrections automatiquement? (o/N)"if ($apply -eq "o" -or $apply -eq "O") {    Write-Host ""    Write-Host "[>] Application des corrections..." -ForegroundColor Yellow    npx ts-node scripts/apply-fixes.ts}